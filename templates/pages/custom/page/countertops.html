{{#partial "page"}}

<!--
    1) Hero (use category image)
    2) Title, Content
    3) Icons
    4) Page Builder #1
    5) Steps 1-4
    5) Related
-->


<section class="page container stonecoat-landing">
    <div class="page-hero">
        <img src="https://cdn11.bigcommerce.com/s-19qfhxpoud/images/stencil/original/image-manager/gray-and-red-rock-epoxy-kits-bg.jpg" alt="countertop epoxy" />
    </div>

    
        <div class="page-title">
            <h1 class="page-heading">{{ page.title }}</h1>
            <img src="/assets/icons/admin-tooltip.svg" alt="submenu" style="fill:black;"/>
        </div>
        <!-- <p class="page-meta">
            {{ head.meta_tags }}
        </p> -->
        
            {{{region name="countertops_top"}}}

        <div class="scc-page-content">
            <p>{{{page.content}}}</p>
        </div>

        <div class="page-videos">
            {{{region name="countertops_videos"}}}
        </div>
    
    {{{region name="countertops_middle"}}}

    <div class="page-steps">
        <div class="step">
            <div class="step-head">
            <h3 class="step-title">Choose Epoxy & Amount Needed</h3>
            <span class="step-icon">1</span></div>
            <div class="step-description">
                <p>Find the epoxy that works for your project, then calculate how much you need.</p>
            </div>
            {{> components/custom/epoxy-calculator }}
            <div class="step-products">
                {{{region name="countertops_step1"}}}
            </div>
        </div>

        <div class="step">
            <div class="step-head">
                <h3 class="step-title">Choose Colorants</h3>
                <span class="step-icon">2</span>
            </div>
            <div class="step-description">
                <p>Use spray paint, powders, dusts and dyes to your epoxy countertops.</p>
            </div>
            <div class="step-products">
                {{{region name="countertops_step2"}}}
            </div>
        </div>

        <div class="step">
            <div class="step-head">
            <h3 class="step-title">Choose Additives</h3>
            <span class="step-icon">3</span></div>
            <div class="step-description">
                <p>Need anything to add? Find it here.</p>
            </div>
            <div class="step-products">
                {{{region name="countertops_step3"}}}
            </div>
        </div>

        <div class="step">
            <div class="step-head">
            <h3 class="step-title">Choose Tools & Acccessories</h3>
            <span class="step-icon">4</span></div>
            <div class="step-description">
                <p>Get the supplies to make your project a success!</p>
            </div>
            <div class="step-products">
                {{{region name="countertops_step4"}}}
            </div>
    </div>
    </div>

    {{{region name="countertops_bottom"}}}

    
        
        <div class="page-related-products">
            {{{region name="countertops_related"}}}
        </div>

    {{> components/custom/categories}}
    
</section>

{{/partial}}

{{> layout/base}}

<!-- graphql load all countertop category products -->
<script>
    fetch('/graphql', {
      method: 'POST',
      credentials: 'same-origin',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer {{ settings.storefront_api.token }}' // use auto-generated token
      },
      body: JSON.stringify({
        query: `query CategoryByUrl {

site {

  route(path: "/shop/countertop-epoxy") {

    node {

      id

      ... on Category {

        name

        entityId

        description

        products {

          edges {

            node {

              name

              defaultImage {

                url(width: 1200)

              }

              brand {

                name

                defaultImage {

                  url(width: 200)

                }

              }

              prices {

                price {

                  ...PriceFields

                }

                priceRange {

                  min {

                    ...PriceFields

                  }

                  max {

                    ...PriceFields

                  }

                }

              }

            }

          }

        }

      }

    }

  }

}

}


fragment PriceFields on Money {

value

currencyCode

}`
      })
    })
    .then(res => res.json())
    .then(data => console.log(data)) // will log JSON result to browser console
    .catch(error => console.error(error));
    </script>